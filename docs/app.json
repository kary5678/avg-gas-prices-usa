[{"name":"app.R","content":"#\n# This is a Shiny web application. You can run the application by clicking\n# the 'Run App' button above.\n#\n# Find out more about building applications with Shiny here:\n#\n#    http://shiny.rstudio.com/\n#\n\nlibrary(shiny)\nlibrary(maps)\nlibrary(readr)\nlibrary(dplyr)\n\n# Load gas price data\ngas_data <- read_csv(\"data/gas_prices_texas.csv\") |>\n  mutate(\n    Metro = toupper(Metro),\n    Regular = as.numeric(gsub(\"[$,]\", \"\", Regular)),\n    Mid = as.numeric(gsub(\"[$,]\", \"\", Mid)),\n    Premium = as.numeric(gsub(\"[$,]\", \"\", Premium)),\n    Diesel = as.numeric(gsub(\"[$,]\", \"\", Diesel))\n  )\n\n# Hardcoded lat/lon for major cities (simplified)\ncity_coords <- tibble::tibble(\n  Metro = c(\"AUSTIN\", \"DALLAS\", \"HOUSTON\", \"SAN ANTONIO\"),\n  lat = c(30.2672, 32.7767, 29.7604, 29.4241),\n  lon = c(-97.7431, -96.7970, -95.3698, -98.4936)\n)\n\nui <- fluidPage(\n  titlePanel(\"Texas Gas Prices by City\"),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\"fuel_type\", \"Select Fuel Type\",\n                  choices = c(\"Regular\", \"Mid\", \"Premium\", \"Diesel\")),\n      selectInput(\"timeframe\", \"Select Timeframe\",\n                  choices = c(\"Current Avg.\", \"Yesterday Avg.\", \"Week Ago Avg.\",\n                              \"Month Ago Avg.\", \"Year Ago Avg.\"),\n                  selected = \"Current Avg.\")\n    ),\n    mainPanel(\n      plotOutput(\"mapPlot\", height = \"600px\")\n    )\n  )\n)\n\nserver <- function(input, output, session) {\n  output$mapPlot <- renderPlot({\n    fuel <- input$fuel_type\n    timeframe <- input$timeframe\n    \n    df <- gas_data |>\n      filter(Timeframe == timeframe) |>\n      inner_join(city_coords, by = \"Metro\")\n    \n    map(\"state\", \"texas\", col = \"#cccccc\", fill = TRUE)\n    points(df$lon, df$lat, pch = 21, bg = \"red\", cex = 2)\n    \n    labels <- paste0(df$Metro, \": $\", round(df[[fuel]], 2))\n    text(df$lon, df$lat, labels = labels, pos = 4, cex = 0.8)\n  })\n}\n\nshinyApp(ui = ui, server = server)\n","type":"text"},{"name":"README.md","content":"# avg-gas-prices-usa","type":"text"},{"name":"avg-gas-prices-usa.Rproj","content":"Version: 1.0\n\nRestoreWorkspace: Default\nSaveWorkspace: Default\nAlwaysSaveHistory: Default\n\nEnableCodeIndexing: Yes\nUseSpacesForTab: Yes\nNumSpacesForTab: 2\nEncoding: UTF-8\n\nRnwWeave: Sweave\nLaTeX: pdfLaTeX\n","type":"text"},{"name":"data/gas_prices_texas.csv","content":"Metro,Date,Timeframe,Regular,Mid,Premium,Diesel\r\nAbilene,2025-07-11,Current Avg.,$2.728,$3.103,$3.404,$3.226\r\nAbilene,2025-07-11,Yesterday Avg.,$2.748,$3.095,$3.409,$3.232\r\nAbilene,2025-07-11,Week Ago Avg.,$2.592,$2.935,$3.249,$3.228\r\nAbilene,2025-07-11,Month Ago Avg.,$2.686,$3.018,$3.337,$2.997\r\nAbilene,2025-07-11,Year Ago Avg.,$3.131,$3.425,$3.721,$3.496\r\nAmarillo,2025-07-11,Current Avg.,$2.635,$2.981,$3.323,$3.201\r\nAmarillo,2025-07-11,Yesterday Avg.,$2.623,$2.989,$3.310,$3.203\r\nAmarillo,2025-07-11,Week Ago Avg.,$2.662,$3.007,$3.356,$3.224\r\nAmarillo,2025-07-11,Month Ago Avg.,$2.619,$2.940,$3.279,$2.979\r\nAmarillo,2025-07-11,Year Ago Avg.,$2.975,$3.300,$3.608,$3.316\r\nAustin-San Marcos,2025-07-11,Current Avg.,$2.718,$3.182,$3.540,$3.145\r\nAustin-San Marcos,2025-07-11,Yesterday Avg.,$2.736,$3.200,$3.552,$3.148\r\nAustin-San Marcos,2025-07-11,Week Ago Avg.,$2.704,$3.172,$3.523,$3.150\r\nAustin-San Marcos,2025-07-11,Month Ago Avg.,$2.856,$3.321,$3.682,$3.050\r\nAustin-San Marcos,2025-07-11,Year Ago Avg.,$3.211,$3.649,$3.993,$3.512\r\nBeaumont-Port Arthur,2025-07-11,Current Avg.,$2.736,$3.160,$3.590,$3.182\r\nBeaumont-Port Arthur,2025-07-11,Yesterday Avg.,$2.739,$3.165,$3.615,$3.182\r\nBeaumont-Port Arthur,2025-07-11,Week Ago Avg.,$2.749,$3.207,$3.596,$3.189\r\nBeaumont-Port Arthur,2025-07-11,Month Ago Avg.,$2.669,$3.122,$3.551,$3.034\r\nBeaumont-Port Arthur,2025-07-11,Year Ago Avg.,$3.058,$3.490,$3.888,$3.430\r\nBrownsville-Harlingen,2025-07-11,Current Avg.,$2.805,$3.249,$3.599,$3.337\r\nBrownsville-Harlingen,2025-07-11,Yesterday Avg.,$2.831,$3.280,$3.630,$3.352\r\nBrownsville-Harlingen,2025-07-11,Week Ago Avg.,$2.510,$2.933,$3.291,$3.035\r\nBrownsville-Harlingen,2025-07-11,Month Ago Avg.,$2.577,$3.006,$3.348,$2.910\r\nBrownsville-Harlingen,2025-07-11,Year Ago Avg.,$3.230,$3.592,$3.912,$3.601\r\nCollege Station-Bryan,2025-07-11,Current Avg.,$2.729,$3.197,$3.527,$3.222\r\nCollege Station-Bryan,2025-07-11,Yesterday Avg.,$2.732,$3.196,$3.523,$3.221\r\nCollege Station-Bryan,2025-07-11,Week Ago Avg.,$2.739,$3.208,$3.528,$3.238\r\nCollege Station-Bryan,2025-07-11,Month Ago Avg.,$2.680,$3.143,$3.485,$3.125\r\nCollege Station-Bryan,2025-07-11,Year Ago Avg.,$3.142,$3.577,$3.923,$3.491\r\nCorpus Christi,2025-07-11,Current Avg.,$2.831,$3.286,$3.626,$3.312\r\nCorpus Christi,2025-07-11,Yesterday Avg.,$2.850,$3.309,$3.650,$3.330\r\nCorpus Christi,2025-07-11,Week Ago Avg.,$2.558,$2.984,$3.337,$2.986\r\nCorpus Christi,2025-07-11,Month Ago Avg.,$2.584,$3.008,$3.349,$2.841\r\nCorpus Christi,2025-07-11,Year Ago Avg.,$3.202,$3.607,$3.932,$3.528\r\nDallas,2025-07-11,Current Avg.,$2.942,$3.365,$3.698,$3.221\r\nDallas,2025-07-11,Yesterday Avg.,$2.949,$3.372,$3.706,$3.230\r\nDallas,2025-07-11,Week Ago Avg.,$2.709,$3.126,$3.468,$3.270\r\nDallas,2025-07-11,Month Ago Avg.,$2.870,$3.294,$3.627,$2.996\r\nDallas,2025-07-11,Year Ago Avg.,$3.245,$3.644,$3.970,$3.485\r\nEl Paso,2025-07-11,Current Avg.,$2.907,$3.375,$3.697,$3.418\r\nEl Paso,2025-07-11,Yesterday Avg.,$2.935,$3.417,$3.738,$3.423\r\nEl Paso,2025-07-11,Week Ago Avg.,$2.828,$3.277,$3.612,$3.238\r\nEl Paso,2025-07-11,Month Ago Avg.,$2.914,$3.375,$3.703,$3.251\r\nEl Paso,2025-07-11,Year Ago Avg.,$3.454,$3.903,$4.229,$3.702\r\nFort Worth-Arlington,2025-07-11,Current Avg.,$2.947,$3.348,$3.687,$3.210\r\nFort Worth-Arlington,2025-07-11,Yesterday Avg.,$2.953,$3.349,$3.687,$3.222\r\nFort Worth-Arlington,2025-07-11,Week Ago Avg.,$2.719,$3.123,$3.453,$3.256\r\nFort Worth-Arlington,2025-07-11,Month Ago Avg.,$2.866,$3.268,$3.608,$2.986\r\nFort Worth-Arlington,2025-07-11,Year Ago Avg.,$3.221,$3.605,$3.934,$3.466\r\nGalveston-Texas City,2025-07-11,Current Avg.,$2.783,$3.320,$3.690,$3.176\r\nGalveston-Texas City,2025-07-11,Yesterday Avg.,$2.790,$3.320,$3.676,$3.170\r\nGalveston-Texas City,2025-07-11,Week Ago Avg.,$2.782,$3.327,$3.689,$3.184\r\nGalveston-Texas City,2025-07-11,Month Ago Avg.,$2.704,$3.207,$3.590,$3.018\r\nGalveston-Texas City,2025-07-11,Year Ago Avg.,$3.146,$3.582,$3.993,$3.493\r\nHouston,2025-07-11,Current Avg.,$2.733,$3.327,$3.727,$3.157\r\nHouston,2025-07-11,Yesterday Avg.,$2.735,$3.326,$3.733,$3.161\r\nHouston,2025-07-11,Week Ago Avg.,$2.740,$3.318,$3.729,$3.157\r\nHouston,2025-07-11,Month Ago Avg.,$2.676,$3.258,$3.663,$3.010\r\nHouston,2025-07-11,Year Ago Avg.,$3.156,$3.632,$4.018,$3.451\r\nKilleen-Temple-Fort Hood,2025-07-11,Current Avg.,$2.779,$3.209,$3.482,$3.117\r\nKilleen-Temple-Fort Hood,2025-07-11,Yesterday Avg.,$2.780,$3.186,$3.474,$3.124\r\nKilleen-Temple-Fort Hood,2025-07-11,Week Ago Avg.,$2.677,$3.030,$3.364,$3.122\r\nKilleen-Temple-Fort Hood,2025-07-11,Month Ago Avg.,$2.735,$3.165,$3.453,$3.002\r\nKilleen-Temple-Fort Hood,2025-07-11,Year Ago Avg.,$3.104,$3.454,$3.754,$3.392\r\nLaredo,2025-07-11,Current Avg.,$2.695,$3.171,$3.510,$3.240\r\nLaredo,2025-07-11,Yesterday Avg.,$2.719,$3.190,$3.544,$3.274\r\nLaredo,2025-07-11,Week Ago Avg.,$2.570,$3.061,$3.409,$3.060\r\nLaredo,2025-07-11,Month Ago Avg.,$2.517,$2.958,$3.327,$2.882\r\nLaredo,2025-07-11,Year Ago Avg.,$3.245,$3.601,$3.960,$3.576\r\nLongview,2025-07-11,Current Avg.,$2.783,$3.238,$3.571,$3.244\r\nLongview,2025-07-11,Yesterday Avg.,$2.787,$3.236,$3.592,$3.251\r\nLongview,2025-07-11,Week Ago Avg.,$2.785,$3.226,$3.566,$3.230\r\nLongview,2025-07-11,Month Ago Avg.,$2.681,$3.120,$3.463,$3.033\r\nLongview,2025-07-11,Year Ago Avg.,$3.084,$3.459,$3.838,$3.437\r\nLubbock,2025-07-11,Current Avg.,$2.669,$3.040,$3.365,$3.148\r\nLubbock,2025-07-11,Yesterday Avg.,$2.677,$3.069,$3.384,$3.159\r\nLubbock,2025-07-11,Week Ago Avg.,$2.578,$2.959,$3.283,$3.118\r\nLubbock,2025-07-11,Month Ago Avg.,$2.563,$2.945,$3.241,$2.915\r\nLubbock,2025-07-11,Year Ago Avg.,$2.976,$3.375,$3.671,$3.237\r\nMcAllen-Edinburg-Mission,2025-07-11,Current Avg.,$2.801,$3.268,$3.627,$3.307\r\nMcAllen-Edinburg-Mission,2025-07-11,Yesterday Avg.,$2.826,$3.307,$3.664,$3.338\r\nMcAllen-Edinburg-Mission,2025-07-11,Week Ago Avg.,$2.486,$2.936,$3.297,$2.975\r\nMcAllen-Edinburg-Mission,2025-07-11,Month Ago Avg.,$2.550,$3.002,$3.366,$2.850\r\nMcAllen-Edinburg-Mission,2025-07-11,Year Ago Avg.,$3.229,$3.609,$3.944,$3.566\r\nMidland,2025-07-11,Current Avg.,$2.881,$3.450,$3.705,$3.387\r\nMidland,2025-07-11,Yesterday Avg.,$2.895,$3.464,$3.720,$3.376\r\nMidland,2025-07-11,Week Ago Avg.,$2.667,$3.200,$3.473,$3.203\r\nMidland,2025-07-11,Month Ago Avg.,$2.748,$3.313,$3.577,$2.978\r\nMidland,2025-07-11,Year Ago Avg.,$3.138,$3.552,$3.865,$3.530\r\nOdessa,2025-07-11,Current Avg.,$2.817,$3.345,$3.623,$3.378\r\nOdessa,2025-07-11,Yesterday Avg.,$2.827,$3.353,$3.646,$3.382\r\nOdessa,2025-07-11,Week Ago Avg.,$2.669,$3.189,$3.459,$3.229\r\nOdessa,2025-07-11,Month Ago Avg.,$2.711,$3.257,$3.537,$3.006\r\nOdessa,2025-07-11,Year Ago Avg.,$3.126,$3.566,$3.842,$3.550\r\nSan Angelo,2025-07-11,Current Avg.,$2.612,$3.123,$3.357,$3.169\r\nSan Angelo,2025-07-11,Yesterday Avg.,$2.641,$3.128,$3.365,$3.191\r\nSan Angelo,2025-07-11,Week Ago Avg.,$2.798,$3.268,$3.519,$3.282\r\nSan Angelo,2025-07-11,Month Ago Avg.,$2.622,$3.069,$3.360,$2.977\r\nSan Angelo,2025-07-11,Year Ago Avg.,$3.130,$3.592,$3.842,$3.541\r\nSan Antonio,2025-07-11,Current Avg.,$2.724,$3.192,$3.554,$3.083\r\nSan Antonio,2025-07-11,Yesterday Avg.,$2.762,$3.220,$3.579,$3.083\r\nSan Antonio,2025-07-11,Week Ago Avg.,$2.628,$3.088,$3.442,$3.072\r\nSan Antonio,2025-07-11,Month Ago Avg.,$2.870,$3.320,$3.670,$3.006\r\nSan Antonio,2025-07-11,Year Ago Avg.,$3.193,$3.596,$3.944,$3.500\r\nSherman-Denison,2025-07-11,Current Avg.,$2.898,$3.268,$3.594,$3.125\r\nSherman-Denison,2025-07-11,Yesterday Avg.,$2.917,$3.251,$3.584,$3.144\r\nSherman-Denison,2025-07-11,Week Ago Avg.,$2.613,$2.966,$3.293,$3.189\r\nSherman-Denison,2025-07-11,Month Ago Avg.,$2.745,$3.090,$3.429,$2.944\r\nSherman-Denison,2025-07-11,Year Ago Avg.,$3.112,$3.448,$3.811,$3.441\r\nTexarkana (TX only),2025-07-11,Current Avg.,$2.818,$3.263,$3.655,$3.258\r\nTexarkana (TX only),2025-07-11,Yesterday Avg.,$2.827,$3.270,$3.601,$3.264\r\nTexarkana (TX only),2025-07-11,Week Ago Avg.,$2.814,$3.236,$3.637,$3.221\r\nTexarkana (TX only),2025-07-11,Month Ago Avg.,$2.727,$3.151,$3.539,$3.047\r\nTexarkana (TX only),2025-07-11,Year Ago Avg.,$3.156,$3.528,$3.858,$3.476\r\nTyler,2025-07-11,Current Avg.,$2.719,$3.140,$3.463,$3.149\r\nTyler,2025-07-11,Yesterday Avg.,$2.720,$3.137,$3.477,$3.154\r\nTyler,2025-07-11,Week Ago Avg.,$2.690,$3.052,$3.418,$3.162\r\nTyler,2025-07-11,Month Ago Avg.,$2.634,$3.002,$3.335,$2.967\r\nTyler,2025-07-11,Year Ago Avg.,$3.000,$3.394,$3.722,$3.403\r\nVictoria,2025-07-11,Current Avg.,$2.788,$3.161,$3.538,$3.230\r\nVictoria,2025-07-11,Yesterday Avg.,$2.796,$3.138,$3.503,$3.233\r\nVictoria,2025-07-11,Week Ago Avg.,$2.686,$3.053,$3.381,$3.148\r\nVictoria,2025-07-11,Month Ago Avg.,$2.636,$2.985,$3.369,$2.960\r\nVictoria,2025-07-11,Year Ago Avg.,$3.157,$3.507,$3.835,$3.496\r\nWaco,2025-07-11,Current Avg.,$2.777,$3.183,$3.516,$3.121\r\nWaco,2025-07-11,Yesterday Avg.,$2.774,$3.190,$3.503,$3.121\r\nWaco,2025-07-11,Week Ago Avg.,$2.687,$3.102,$3.412,$3.130\r\nWaco,2025-07-11,Month Ago Avg.,$2.580,$2.946,$3.276,$2.960\r\nWaco,2025-07-11,Year Ago Avg.,$3.104,$3.490,$3.831,$3.453\r\nWichita Falls,2025-07-11,Current Avg.,$2.691,$3.090,$3.409,$3.194\r\nWichita Falls,2025-07-11,Yesterday Avg.,$2.687,$3.071,$3.424,$3.177\r\nWichita Falls,2025-07-11,Week Ago Avg.,$2.653,$3.106,$3.405,$3.138\r\nWichita Falls,2025-07-11,Month Ago Avg.,$2.630,$3.023,$3.345,$3.014\r\nWichita Falls,2025-07-11,Year Ago Avg.,$3.020,$3.425,$3.702,$3.448\r\n","type":"text"},{"name":"scrape_gas_prices_texas.ipynb","content":"{\n \"cells\": [\n  {\n   \"cell_type\": \"code\",\n   \"execution_count\": null,\n   \"id\": \"46c6d20f\",\n   \"metadata\": {},\n   \"outputs\": [\n    {\n     \"name\": \"stdout\",\n     \"output_type\": \"stream\",\n     \"text\": [\n      \"Saved 135 rows from 2025-07-11 to texas_gas_prices.csv\\n\"\n     ]\n    }\n   ],\n   \"source\": [\n    \"from selenium import webdriver\\n\",\n    \"from selenium.webdriver.chrome.options import Options\\n\",\n    \"from bs4 import BeautifulSoup\\n\",\n    \"import time\\n\",\n    \"from datetime import datetime\\n\",\n    \"import csv\\n\",\n    \"\\n\",\n    \"\\n\",\n    \"# Setup headless Chrome\\n\",\n    \"options = Options()\\n\",\n    \"options.add_argument(\\\"--headless\\\")\\n\",\n    \"driver = webdriver.Chrome(options=options)\\n\",\n    \"\\n\",\n    \"# URL for Texas\\n\",\n    \"url = \\\"https://gasprices.aaa.com/?state=TX#state-metro\\\"\\n\",\n    \"driver.get(url)\\n\",\n    \"\\n\",\n    \"# Wait for dynamic content to load\\n\",\n    \"time.sleep(5)\\n\",\n    \"\\n\",\n    \"# Parse page\\n\",\n    \"soup = BeautifulSoup(driver.page_source, \\\"html.parser\\\")\\n\",\n    \"driver.quit()\\n\",\n    \"\\n\",\n    \"# Extract date (e.g., \\\"7/11/25\\\")\\n\",\n    \"date_tag = soup.find(\\\"span\\\", string=lambda text: text and \\\"Price as of\\\" in text)\\n\",\n    \"price_date = date_tag.get_text(strip=True).replace(\\\"Price as of\\\", \\\"\\\") if date_tag else \\\"Unknown\\\"\\n\",\n    \"\\n\",\n    \"date_tag = soup.find(lambda tag: tag.name in ['p', 'span'] and tag.get_text(strip=True).startswith(\\\"Price as of\\\"))\\n\",\n    \"if date_tag:\\n\",\n    \"    text = date_tag.get_text(\\\" \\\", strip=True)  # join children texts with spaces\\n\",\n    \"    price_date = text.replace(\\\"Price as of\\\", \\\"\\\").strip()\\n\",\n    \"    # Format date to YYYY-MM-DD\\n\",\n    \"    price_date = datetime.strptime(price_date, \\\"%m/%d/%y\\\").strftime(\\\"%Y-%m-%d\\\")\\n\",\n    \"else:\\n\",\n    \"    price_date = \\\"Unknown\\\"\\n\",\n    \"\\n\",\n    \"# Collect data\\n\",\n    \"data_rows = []\\n\",\n    \"metro_headers = soup.select(\\\"div.accordion-prices h3[data-title]\\\")\\n\",\n    \"\\n\",\n    \"for header in metro_headers:\\n\",\n    \"    metro_name = header.text.strip()\\n\",\n    \"    table = header.find_next(\\\"table\\\", class_=\\\"table-mob\\\")\\n\",\n    \"\\n\",\n    \"    for row in table.select(\\\"tbody tr\\\"):\\n\",\n    \"        cols = [col.text.strip() for col in row.find_all(\\\"td\\\")]\\n\",\n    \"        if len(cols) == 5:\\n\",\n    \"            timeframe = cols[0]\\n\",\n    \"            regular, mid, premium, diesel = cols[1:]\\n\",\n    \"            data_rows.append([metro_name, price_date, timeframe, regular, mid, premium, diesel])\\n\",\n    \"\\n\",\n    \"# Save to CSV\\n\",\n    \"csv_filename = \\\"gas_prices_texas.csv\\\"\\n\",\n    \"with open(csv_filename, \\\"w\\\", newline='', encoding='utf-8') as csvfile:\\n\",\n    \"    writer = csv.writer(csvfile)\\n\",\n    \"    writer.writerow([\\\"Metro\\\", \\\"Date\\\", \\\"Timeframe\\\", \\\"Regular\\\", \\\"Mid\\\", \\\"Premium\\\", \\\"Diesel\\\"])\\n\",\n    \"    writer.writerows(data_rows)\\n\",\n    \"\\n\",\n    \"print(f\\\"Saved {len(data_rows)} rows from {price_date} to {csv_filename}\\\")\\n\"\n   ]\n  }\n ],\n \"metadata\": {\n  \"kernelspec\": {\n   \"display_name\": \"base\",\n   \"language\": \"python\",\n   \"name\": \"python3\"\n  },\n  \"language_info\": {\n   \"codemirror_mode\": {\n    \"name\": \"ipython\",\n    \"version\": 3\n   },\n   \"file_extension\": \".py\",\n   \"mimetype\": \"text/x-python\",\n   \"name\": \"python\",\n   \"nbconvert_exporter\": \"python\",\n   \"pygments_lexer\": \"ipython3\",\n   \"version\": \"3.9.13\"\n  }\n },\n \"nbformat\": 4,\n \"nbformat_minor\": 5\n}\n","type":"text"}]
